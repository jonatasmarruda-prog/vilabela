<script>
function mostrarBotaoConfirmar() {
    let nome = document.getElementById("nome").value.trim();
    if (nome.length < 2) {
        alert("Digite um nome válido.");
        return;
    }
    document.getElementById("confirmarBtn").style.display = "inline-block";
}

function confirmarVaga() {

    fetch('https://api.countapi.xyz/hit/trilheirosrondonopolis/teste')
        .then(res => {
            if (!res.ok) {
                alert("Erro ao conectar com o servidor. Tente novamente.");
            }
            return res.json();
        })
        .then(data => {

            console.log("RETORNO COUNTAPI:", data); // DEBUG

            if (!data || !data.value) {
                alert("Erro no contador. Verifique o HTTPS.");
                return;
            }

            if (data.value > 2) {
                document.getElementById("vagasEsgotadas").style.display = "block";
                document.getElementById("confirmarBtn").style.display = "none";
                return;
            }

            document.getElementById("grupoBtn").style.display = "block";
            document.getElementById("confirmarBtn").innerText = "Confirmado! ✔️";
        })
        .catch(err => {
            console.error(err);
            alert("Erro ao conectar. Precisa abrir o site com HTTPS.");
        });
}
</script>

